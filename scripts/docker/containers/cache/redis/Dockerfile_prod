# ======================================================================================================================
# Dockerfile - Redis                                                                      https://hub.docker.com/_/redis
# ======================================================================================================================
ARG REDIS_VERSION

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 01 : Pull official base image 
# ----------------------------------------------------------------------------------------------------------------------
FROM redis:${REDIS_VERSION}

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 02 : Set environment variables
# ----------------------------------------------------------------------------------------------------------------------
#RUN echo "[ Redis ] Set environment variables"

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 03 : Set Work directory
# ----------------------------------------------------------------------------------------------------------------------
#RUN echo "[ Redis ] Set Work directory "

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 04 : Install packages
# ----------------------------------------------------------------------------------------------------------------------
#RUN echo "[ Redis ] Install packages"

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 05 : Update configuration                                              https://redis.io/docs/management/config/
# ----------------------------------------------------------------------------------------------------------------------
RUN echo "[ Redis ] Update configuration"
COPY --link scripts/docker/containers/cache/redis/etc/redis_dev.conf /usr/local/etc/redis/redis.conf

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 06 : Copy source files                                                     https://redis.io/docs/manual/config/
# ----------------------------------------------------------------------------------------------------------------------
#RUN echo "[ Redis ] Copy source files"

# ----------------------------------------------------------------------------------------------------------------------
# STEP - 07 : Start the service
# ----------------------------------------------------------------------------------------------------------------------
RUN echo "[ Redis ] Start the service"
EXPOSE 6379
CMD [ "redis-server", "/usr/local/etc/redis/redis.conf", "--appendonly", "yes" ]